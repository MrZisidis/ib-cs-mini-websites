<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IB CS HL - Case Study Revision</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        /* Animation Utilities */
        .animate-in {
            animation-duration: 0.5s;
            animation-fill-mode: both;
            animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        }

        .slide-in-from-bottom-4 {
            animation-name: slideInBottom;
        }

        .slide-in-from-top-4 {
            animation-name: slideInTop;
        }

        .fade-in {
            animation-name: fadeIn;
        }

        .zoom-in-95 {
            animation-name: zoomIn95;
        }

        .zoom-in-90 {
            animation-name: zoomIn90;
        }

        @keyframes slideInBottom {
            from {
                transform: translateY(1rem);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideInTop {
            from {
                transform: translateY(-1rem);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes zoomIn95 {
            from {
                transform: scale(0.95);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes zoomIn90 {
            from {
                transform: scale(0.90);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }
    </style>
</head>

<body class="bg-gray-50 text-slate-900 selection:bg-blue-100 flex flex-col min-h-screen">

    <div id="root" class="flex flex-1">
        <!-- Sidebar and Content will be injected here -->
    </div>

    <script>
        // --- DATA ---
        const ptesData = [
            {
                id: 1,
                title: "Pre-engagement Interaction",
                icon: "file-text",
                iconColor: "text-blue-600",
                summary: "Defining the legal and operational boundaries.",
                details: "This is where the 'Rules of Engagement' (ROE) are authored. In MTPH, this involves negotiating with Dr. Evelyn Reed (CEO) and David Chen (IT Director).",
                keyPoints: [
                    "Scope Definition: What IP ranges are allowed? Is the ICU off-limits?",
                    "Liability: Who is responsible if a VitalsWatch monitor crashes?",
                    "Success Criteria: Is the goal to find a breach or to test staff response?",
                    "Timeframes: Scheduling tests for off-peak hours (e.g., 8 PM - 6 AM) to minimize clinical impact."
                ],
                ethicalLink: "Proper Authorisation: Requires approval from both executive leadership and clinical department heads (Surgery/Radiology)."
            },
            {
                id: 2,
                title: "Intelligence Gathering (OSINT)",
                icon: "search",
                iconColor: "text-cyan-600",
                summary: "Passive recon using public data to map the target.",
                details: "Using open-source tools to identify MTPH's technical footprint without alerting their security team.",
                keyPoints: [
                    "Social Engineering Intel: Finding staff names on LinkedIn to plan vishing attacks.",
                    "Tech Stack Leaks: Analyzing job postings for requirements like 'SafeNet VPN' or 'Zim-Comm'.",
                    "Document Harvesting: Finding the 'Data Security Policy for Vendors' via Google Dorking.",
                    "Infrastructure Mapping: Using WHOIS and DNS records to find hospital server IPs."
                ],
                ethicalLink: "Confidentiality: Testers must ensure gathered data is stored securely and not exposed during the research phase."
            },
            {
                id: 3,
                title: "Threat Modeling",
                icon: "users",
                iconColor: "text-indigo-600",
                summary: "Categorizing assets and potential adversaries.",
                details: "Identifying the 'Crown Jewels' (CareFlow EHR) and the paths an attacker might take to reach them.",
                keyPoints: [
                    "Adversary Analysis: Distinguishing between a disgruntled insider (Nurse/Janitor) and external ransomware gangs.",
                    "Asset Prioritization: High Confidentiality (EHR) vs. High Availability (VitalsWatch IoT).",
                    "Attack Vector Mapping: Identifying the SafeNet VPN as a primary external entry point."
                ],
                ethicalLink: "Privacy: Deciding whether proving impact justifies the risk of accessing sensitive medical histories."
            },
            {
                id: 4,
                title: "Vulnerability Analysis",
                icon: "alert-triangle",
                iconColor: "text-amber-600",
                summary: "Discovering flaws in the hospital's defenses.",
                details: "Active scanning of ports and services to find 'open doors' like unpatched software versions.",
                keyPoints: [
                    "Service Fingerprinting: Identifying that Zim-Comm is running an outdated, vulnerable version.",
                    "False Positive Triage: Sorting tool-generated noise from actual security risks.",
                    "VitalsWatch Constraints: Avoiding aggressive scans that could crash fragile IoT medical devices."
                ],
                ethicalLink: "Non-disruption: Specialized healthcare testing avoids high-intensity scanning on life-critical devices."
            },
            {
                id: 5,
                title: "Exploitation",
                icon: "activity",
                iconColor: "text-red-600",
                summary: "The controlled act of breaching security.",
                details: "Using a proof-of-concept (like a Buffer Overflow) to gain unauthorized access to an MTPH system.",
                keyPoints: [
                    "Buffer Overflow: Overwriting memory in the SafeNet VPN to execute remote code.",
                    "SQL Injection: Manipulating the MyMTPH Patient Portal to bypass authentication.",
                    "Bypassing Controls: Proving that the firewall rules for Zim-Comm are insufficient."
                ],
                ethicalLink: "Responsible Use: Testers only exploit enough to prove the risk, avoiding any damage to real hospital operations."
            },
            {
                id: 6,
                title: "Post-Exploitation",
                icon: "network",
                iconColor: "text-purple-600",
                summary: "Lateral movement and maintaining access.",
                details: "Simulating an advanced persistent threat (APT) that lives within the hospital network.",
                keyPoints: [
                    "Privilege Escalation: Moving from a standard staff account to an Administrative one.",
                    "Lateral Movement: Jumping from a receptionist's PC to the EHR database server.",
                    "Persistence: Installing a backdoor to verify if MTPH's security team detects 'dwell time'."
                ],
                ethicalLink: "Integrity: Ensuring that no 'persistent' tools are left behind after the engagement concludes."
            },
            {
                id: 7,
                title: "Reporting",
                icon: "check-circle-2",
                iconColor: "text-emerald-600",
                summary: "Communicating findings and remediation.",
                details: "Translating technical vulnerabilities into actionable steps for different hospital stakeholders.",
                keyPoints: [
                    "Technical Report: Detailed CVE numbers and patch instructions for David Chen.",
                    "Executive Summary: High-level risk assessment and ROI analysis for Dr. Reed.",
                    "Prioritized Remediation: Which fix saves the most lives first?"
                ],
                ethicalLink: "Responsiveness: MTPH must act quickly on the report to close gaps before real attackers find them."
            }
        ];

        const glossary = [
            { term: "Buffer Overflow", desc: "A vulnerability where data overruns a buffer's boundary, overwriting adjacent memoryâ€”used at MTPH to bypass the SafeNet VPN." },
            { term: "ePHI", desc: "Electronic Protected Health Information. The primary data type protected by HIPAA and GDPR at MTPH." },
            { term: "Grey Box Testing", desc: "A compromise where testers have limited knowledge of the network. Ideal for MTPH as it is efficient but realistic." },
            { term: "Air Gapping", desc: "Physically isolating a network from the internet. A potential solution for the most critical medical devices." },
            { term: "Pretexting", desc: "The act of creating a false scenario (e.g., posing as Zim-Comm support) to manipulate staff during vishing." },
            { term: "CVE", desc: "Common Vulnerabilities and Exposures. A database of known security flaws used during Vulnerability Analysis." },
            { term: "CVSS", desc: "Common Vulnerability Scoring System. A numerical score (0-10) indicating the severity of a security flaw." },
            { term: "CIA Triad", desc: "Confidentiality, Integrity, and Availability. The three pillars used to evaluate the impact of a hospital breach." }
        ];

        const quizQuestions = [
            {
                q: "A tester finds a vulnerability in a ventilator's control system. According to the 'Non-disruption' principle, what should they do?",
                options: ["Exploit it immediately to prove the danger", "Document the flaw but do not exploit it on a live device", "Wait until the patient is discharged to test it", "Ignore it because ventilators are out-of-scope"],
                correct: 1,
                exp: "Non-disruption is critical in hospitals. Risking a life-critical device like a ventilator is ethically prohibited."
            },
            {
                q: "Which stakeholder is responsible for authorizing the test at MTPH?",
                options: ["Only David Chen (IT)", "Only Dr. Evelyn Reed (CEO)", "The CEO and all relevant department heads", "The CyberHealth team lead"],
                correct: 2,
                exp: "Authorization must be cross-departmental to ensure clinical areas (like Radiology) aren't surprised by system behavior."
            },
            {
                q: "During OSINT, a tester finds the tech stack via a job posting. Is this ethical?",
                options: ["No, it's an invasion of privacy", "Yes, it is passive collection of public information", "No, unless David Chen gave permission", "Only if the tester has a LinkedIn account"],
                correct: 1,
                exp: "OSINT is passive and uses publicly available data, making it a standard and ethical part of reconnaissance."
            },
            {
                q: "What is the primary risk of a 'Buffer Overflow' in the SafeNet VPN?",
                options: ["Slow internet speeds", "Remote Code Execution (RCE) by an attacker", "Losing access to the EHR", "High electricity costs"],
                correct: 1,
                exp: "A buffer overflow can allow an attacker to run their own malicious code on the system, granting them total control."
            },
            {
                q: "Why is MTPH considered a 'High-Value Target' for ransomware gangs?",
                options: ["They have a large IT budget", "They handle sensitive ePHI and require 24/7 availability", "They use Zim-Comm for messaging", "They are located in a major city"],
                correct: 1,
                exp: "Hospitals handle critical life-saving data (ePHI) and cannot afford downtime, making them more likely to pay ransoms."
            },
            {
                q: "Which PTES phase involves documenting the 'Rules of Engagement' (ROE)?",
                options: ["Intelligence Gathering", "Vulnerability Analysis", "Pre-engagement Interaction", "Post-Exploitation"],
                correct: 2,
                exp: "The ROE are established during Pre-engagement to define legal and technical boundaries."
            },
            {
                q: "A tester gains access to the 'CareFlow EHR' database. What is the most ethical way to prove this?",
                options: ["Download all records to show the CEO", "Take a screenshot of non-sensitive directory names", "Change a patient's prescription to see if they notice", "Post a sample on a secure public forum"],
                correct: 1,
                exp: "Testers should prove access with minimal exposure to actual patient data to maintain confidentiality."
            },
            {
                q: "What does the 'A' in the CIA Triad represent, and why is it vital for VitalsWatch?",
                options: ["Authentication; verifying user identities", "Availability; ensuring monitors work when needed", "Authorization; checking permissions", "Accountability; logging user actions"],
                correct: 1,
                exp: "Availability is life-critical for VitalsWatch. If the system is down, clinical staff cannot monitor patients."
            },
            {
                q: "In 'Grey Box' testing, the tester has...",
                options: ["Full knowledge of the network", "Zero knowledge of the network", "Limited knowledge (e.g., specific IP ranges)", "Access to the CEO's personal emails"],
                correct: 2,
                exp: "Grey box testing provides limited info, simulating an attacker with some prior knowledge, like a contractor."
            },
            {
                q: "Which regulation mandates that MTPH assesses its risks and vulnerabilities?",
                options: ["PCI-DSS", "FERPA", "HIPAA", "The Medical Privacy Act of 1995"],
                correct: 2,
                exp: "HIPAA (Health Insurance Portability and Accountability Act) requires healthcare entities to assess and protect ePHI."
            }
        ];

        // --- STATE ---
        let state = {
            activeSection: 'ptes',
            expandedPhase: null,
            quiz: { current: 0, score: 0, showResults: false, answers: {} }
        };

        const root = document.getElementById('root');

        // --- ACTIONS ---
        function setActiveSection(section) {
            state.activeSection = section;
            render();
        }

        function togglePhase(id) {
            state.expandedPhase = state.expandedPhase === id ? null : id;
            render();
        }

        function handleQuizAnswer(index) {
            const isCorrect = index === quizQuestions[state.quiz.current].correct;
            // Record answer and score only if not showing results yet
            if (!state.quiz.showResults) {
                state.quiz.answers = { ...state.quiz.answers, [state.quiz.current]: index };
                if (isCorrect) state.quiz.score += 1;
                state.quiz.showResults = true;
                render();
            }
        }

        function nextQuestion() {
            if (state.quiz.current < quizQuestions.length - 1) {
                state.quiz.current += 1;
                state.quiz.showResults = false;
            } else {
                setActiveSection('results');
                return; // Early return to avoid double render calls
            }
            render();
        }

        function restartQuiz() {
            state.quiz = { current: 0, score: 0, showResults: false, answers: {} };
            setActiveSection('quiz');
        }

        // --- RENDER FUNCTIONS ---
        function Icon(name, className = "w-6 h-6") {
            // Lucide icons are replaced by <i> tags which are then processed
            return `<i data-lucide="${name}" class="${className}"></i>`;
        }

        function renderSidebar() {
            const navItems = [
                { id: 'ptes', label: 'PTES Framework', icon: 'activity' },
                { id: 'ethics', label: 'Ethical Standards', icon: 'scale' },
                { id: 'glossary', label: 'Key Terms', icon: 'book-open' },
                { id: 'quiz', label: 'Exam Simulator', icon: 'check-circle-2' }
            ];

            return `
            <div class="fixed left-0 top-0 h-full w-20 md:w-64 bg-slate-900 text-white flex flex-col p-4 z-50">
                <div class="flex items-center gap-3 mb-10 px-2 cursor-pointer" onclick="window.location.href='index.html'">
                    ${Icon('shield', "w-8 h-8 text-blue-400")}
                    <span class="hidden md:block font-bold text-xl tracking-tight">MTPH Source</span>
                </div>
                <nav class="space-y-2 flex-1">
                    ${navItems.map(item => `
                        <button onclick="setActiveSection('${item.id}')"
                            class="w-full flex items-center gap-4 p-3 rounded-xl transition-all ${state.activeSection === item.id
                    ? 'bg-blue-600 text-white shadow-lg'
                    : 'text-slate-400 hover:bg-slate-800'
                }"
                        >
                            ${Icon(item.icon, "w-5 h-5")}
                            <span class="hidden md:block font-medium">${item.label}</span>
                        </button>
                    `).join('')}
                    <a href="IB_CS_CaseStudy_2026_StudyGuide.html"
                        class="w-full flex items-center gap-4 p-3 rounded-xl transition-all text-slate-400 hover:bg-slate-800 mt-4"
                    >
                         ${Icon('chevron-left', "w-5 h-5")}
                        <span class="hidden md:block font-medium">Back to Guide</span>
                    </a>
                </nav>
                <div class="mt-auto p-2 bg-slate-800 rounded-xl hidden md:block">
                    <p class="text-xs text-slate-500 mb-1 font-bold">IB PAPER 3 READY</p>
                    <div class="w-full bg-slate-700 h-2 rounded-full overflow-hidden">
                        <div class="bg-blue-500 h-full w-full"></div>
                    </div>
                </div>
            </div>`;
        }

        function renderPTES() {
            return `
            <div class="space-y-6 animate-in slide-in-from-bottom-4 duration-500">
                <div class="bg-blue-600 rounded-2xl p-8 text-white shadow-xl mb-8 overflow-hidden relative">
                    <div class="relative z-10">
                    <h2 class="text-3xl font-bold mb-2">The PTES Methodology</h2>
                    <p class="text-blue-100 max-w-2xl leading-relaxed">The 7 phases of a penetration test are standardized, but their application at MTPH must be adapted for clinical safety.</p>
                    </div>
                    <div class="absolute -right-10 -bottom-10 opacity-20 rotate-12">
                         ${Icon('activity', "w-64 h-64 text-blue-500")}
                    </div>
                </div>

                ${ptesData.map(phase => `
                    <div class="bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden transition-all hover:border-blue-300">
                    <button onclick="togglePhase(${phase.id})" class="w-full p-6 flex items-center justify-between text-left">
                        <div class="flex items-center gap-6">
                        <div class="w-12 h-12 rounded-xl bg-slate-50 flex items-center justify-center shadow-inner">
                            ${Icon(phase.icon, `w-6 h-6 ${phase.iconColor}`)}
                        </div>
                        <div>
                            <span class="text-xs font-black text-slate-400 uppercase tracking-widest">Phase 0${phase.id}</span>
                            <h3 class="text-xl font-bold text-slate-800">${phase.title}</h3>
                        </div>
                        </div>
                        <div class="text-slate-400">
                            ${state.expandedPhase === phase.id ? Icon('chevron-down') : Icon('chevron-right')}
                        </div>
                    </button>
                    ${state.expandedPhase === phase.id ? `
                        <div class="p-8 border-t border-slate-100 bg-slate-50/50 space-y-6">
                        <div class="grid md:grid-cols-2 gap-8">
                            <div>
                            <h4 class="font-bold text-slate-900 mb-2 flex items-center gap-2">
                                ${Icon('info', "w-4 h-4 text-blue-600")} Description
                            </h4>
                            <p class="text-slate-600 leading-relaxed text-sm mb-4">${phase.details}</p>
                            <ul class="space-y-3">
                                ${phase.keyPoints.map(point => `
                                <li class="flex gap-3 text-sm text-slate-700">
                                    <div class="mt-1.5 w-1.5 h-1.5 rounded-full bg-blue-500 flex-shrink-0"></div>
                                    ${point}
                                </li>
                                `).join('')}
                            </ul>
                            </div>
                            <div class="bg-white p-5 rounded-xl border border-blue-100 shadow-sm self-start">
                            <h4 class="font-bold text-indigo-700 mb-2 flex items-center gap-2 text-sm uppercase">
                                ${Icon('scale', "w-4 h-4")} Ethical Tie-In
                            </h4>
                            <p class="text-indigo-900/80 text-sm leading-relaxed italic">${phase.ethicalLink}</p>
                            </div>
                        </div>
                        </div>
                    ` : ''}
                    </div>
                `).join('')}
            </div>`;
        }

        function renderEthics() {
            const qa = [
                { q: "Is it possible to guarantee a 100% safe pen-test?", a: "No. Complex systems are unpredictable. Risk is managed via ROE." },
                { q: "Does finding a bug justify accessing patient records?", a: "Rarely. Ethical testers use 'flag files' to prove access without violating privacy." },
                { q: "Should testing continue if a nurse reports system lag?", a: "No. The ROE should dictate an immediate 'Cease Testing' protocol." }
            ];

            return `
            <div class="space-y-8 animate-in fade-in duration-500">
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-indigo-900 rounded-3xl p-8 text-white shadow-2xl relative overflow-hidden">
                    <h2 class="text-2xl font-bold mb-4">Patient-Centric Ethics</h2>
                    <p class="text-indigo-200 mb-6 leading-relaxed text-sm">Penetration testing in healthcare is governed by the principle of <strong>'Primum non nocere'</strong> (First, do no harm).</p>
                    <div class="space-y-4">
                        <div class="bg-white/10 p-4 rounded-xl border border-white/20">
                        <h4 class="font-bold text-white mb-1">Non-Disruption</h4>
                        <p class="text-indigo-100 text-xs">Testing must not crash ventilators, heart monitors (VitalsWatch), or EHR accessibility.</p>
                        </div>
                        <div class="bg-white/10 p-4 rounded-xl border border-white/20">
                        <h4 class="font-bold text-white mb-1">Confidentiality</h4>
                        <p class="text-indigo-100 text-xs">Testers must prove vulnerabilities without unnecessarily exposing ePHI.</p>
                        </div>
                    </div>
                    <div class="absolute -right-4 -bottom-4 opacity-40">
                         ${Icon('scale', "w-32 h-32 text-indigo-700")}
                    </div>
                    </div>

                    <div class="bg-white p-8 rounded-3xl border border-slate-200 shadow-sm">
                    <h3 class="text-xl font-bold mb-6 text-slate-800">Critical Socratic Questions</h3>
                    <div class="space-y-6">
                        ${qa.map(item => `
                        <div class="group">
                            <p class="font-bold text-sm text-slate-900 group-hover:text-blue-600 transition-colors mb-1">Q: ${item.q}</p>
                            <p class="text-slate-500 text-xs leading-relaxed">${item.a}</p>
                        </div>
                        `).join('')}
                    </div>
                    </div>
                </div>
            </div>`;
        }

        function renderGlossary() {
            return `
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 animate-in zoom-in-95 duration-300">
                ${glossary.map(item => `
                <div class="bg-white p-5 rounded-2xl border border-slate-200 hover:shadow-md transition group">
                    <h4 class="font-bold text-blue-600 mb-1 flex items-center justify-between">
                    ${item.term}
                    <div class="opacity-0 group-hover:opacity-100 transition-opacity">
                         ${Icon('chevron-right', "w-4 h-4")}
                    </div>
                    </h4>
                    <p class="text-slate-600 text-sm leading-relaxed">${item.desc}</p>
                </div>
                `).join('')}
            </div>`;
        }

        function renderQuiz() {
            const currentQ = quizQuestions[state.quiz.current];
            const isLast = state.quiz.current === quizQuestions.length - 1;

            return `
            <div class="max-w-2xl mx-auto animate-in slide-in-from-top-4 duration-500">
                <div class="bg-white rounded-3xl p-10 border border-slate-200 shadow-xl">
                    <div class="flex justify-between items-center mb-10">
                    <span class="text-xs font-black text-emerald-600 uppercase tracking-widest bg-emerald-50 px-3 py-1 rounded-full">Question ${state.quiz.current + 1} of ${quizQuestions.length}</span>
                    <div class="flex gap-1 flex-wrap">
                        ${quizQuestions.map((_, i) => `
                        <div class="h-1.5 w-4 md:w-6 rounded-full ${i <= state.quiz.current ? 'bg-emerald-500' : 'bg-slate-200'}"></div>
                        `).join('')}
                    </div>
                    </div>

                    <h3 class="text-xl md:text-2xl font-bold text-slate-800 mb-8 leading-snug">
                    ${currentQ.q}
                    </h3>

                    <div class="space-y-3">
                    ${currentQ.options.map((opt, i) => {
                const showResults = state.quiz.showResults;
                const isCorrect = i === currentQ.correct;
                const isSelected = state.quiz.answers[state.quiz.current] === i;

                let classes = "border-slate-100 hover:border-blue-400 hover:bg-blue-50";
                if (showResults) {
                    if (isCorrect) classes = "border-emerald-500 bg-emerald-50 text-emerald-800";
                    else if (isSelected) classes = "border-red-400 bg-red-50 text-red-800";
                    else classes = "border-slate-100 opacity-50";
                }

                return `
                        <button
                            ${showResults ? 'disabled' : ''}
                            onclick="handleQuizAnswer(${i})"
                            class="w-full p-4 md:p-5 text-left rounded-2xl border-2 transition-all flex items-center justify-between ${classes}"
                        >
                            <span class="font-semibold text-sm md:text-base">${opt}</span>
                            ${showResults && isCorrect ? Icon('check-circle-2', "text-emerald-500 w-5 h-5 flex-shrink-0") : ''}
                        </button>
                        `;
            }).join('')}
                    </div>

                    ${state.quiz.showResults ? `
                    <div class="mt-8 animate-in fade-in slide-in-from-bottom-2">
                        <div class="bg-slate-900 text-slate-300 p-6 rounded-2xl text-sm mb-6 border-l-4 border-l-blue-400">
                        <p class="font-bold text-white mb-2 text-base">Detailed Explanation:</p>
                        ${currentQ.exp}
                        </div>
                        <button 
                        onclick="nextQuestion()"
                        class="w-full bg-slate-900 text-white py-4 rounded-2xl font-bold hover:bg-slate-800 shadow-lg shadow-slate-200 flex items-center justify-center gap-2 transition-transform active:scale-95"
                        >
                        ${isLast ? 'Finish Exam' : 'Next Question'} ${Icon('chevron-right', "w-5 h-5")}
                        </button>
                    </div>
                    ` : ''}
                </div>
            </div>`;
        }

        function renderResults() {
            return `
            <div class="max-w-2xl mx-auto text-center animate-in zoom-in-90 duration-500">
                <div class="bg-white p-12 rounded-3xl shadow-2xl border border-slate-200">
                    <div class="w-24 h-24 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-6">
                     ${Icon('check-circle-2', "w-12 h-12 text-emerald-600")}
                    </div>
                    <h2 class="text-3xl font-bold mb-2">Simulated Result</h2>
                    <p class="text-slate-500 mb-8">Knowledge Validation Complete.</p>
                    <div class="text-6xl font-black text-slate-900 mb-10">
                    ${state.quiz.score} <span class="text-slate-300">/</span> ${quizQuestions.length}
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                    <button 
                        onclick="restartQuiz()"
                        class="p-4 bg-slate-100 text-slate-700 font-bold rounded-2xl hover:bg-slate-200 transition active:scale-95"
                    >
                        Retake Quiz
                    </button>
                    <button 
                        onclick="setActiveSection('ptes')"
                        class="p-4 bg-blue-600 text-white font-bold rounded-2xl hover:bg-blue-700 transition active:scale-95 shadow-md shadow-blue-100"
                    >
                        Review Material
                    </button>
                    </div>
                </div>
            </div>`;
        }

        function renderContent() {
            let contentHtml = '';
            let headerTitle = '';

            switch (state.activeSection) {
                case 'ptes':
                    headerTitle = 'Penetration Testing Execution Standard';
                    contentHtml = renderPTES();
                    break;
                case 'ethics':
                    headerTitle = 'Hospital Ethical Considerations';
                    contentHtml = renderEthics();
                    break;
                case 'glossary':
                    headerTitle = 'Technical Glossary & Definitions';
                    contentHtml = renderGlossary();
                    break;
                case 'quiz':
                case 'results':
                    headerTitle = 'MTPH Case Study Practice Quiz';
                    contentHtml = state.activeSection === 'results' ? renderResults() : renderQuiz();
                    break;
            }

            return `
             <main class="pl-20 md:pl-64 min-h-screen flex flex-col w-full">
                <header class="p-8 bg-white border-b border-slate-200 sticky top-0 z-40 flex justify-between items-center">
                    <div>
                    <h1 class="text-2xl font-bold text-slate-800">${headerTitle}</h1>
                    <p class="text-slate-500 text-sm">MedTechPro Hospital (MTPH) Official Study Resource</p>
                    </div>
                    <div class="flex gap-2">
                    <span class="px-3 py-1 bg-slate-100 rounded-full text-xs font-bold text-slate-600 border border-slate-200">2026 CASE STUDY</span>
                    </div>
                </header>

                <div class="p-8 max-w-5xl mx-auto flex-1 w-full">
                    ${contentHtml}
                </div>

                <footer class="p-8 mt-auto border-t border-slate-200">
                    <div class="text-xs text-slate-500 flex flex-col md:flex-row items-center gap-2">
                    <span>Copyright (c) 2025 Stefanos Zisidis. Licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer" class="underline hover:text-sky-600">CC BY 4.0</a>.</span>
                    <a href="https://github.com/MrZisidis/gcse-cs-mini-websites" target="_blank" rel="noopener noreferrer" class="inline-block text-slate-400 hover:text-slate-800 transition-colors" aria-label="GitHub">
                        <svg viewBox="0 0 16 16" class="w-4 h-4 fill-current">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52 -.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64 -.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.01.08-2.11 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.91.08 2.11.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.28.24.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55 .38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                        </svg>
                    </a>
                    </div>
                </footer>
            </main>
             `;
        }

        function render() {
            root.innerHTML = renderSidebar() + renderContent();
            lucide.createIcons(); // Re-initialize icons after DOM update
        }

        // --- INIT ---
        render();

    </script>
</body>

</html>